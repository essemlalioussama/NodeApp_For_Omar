var Thymeleaf=function(e){"use strict";function t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function s(e){for(var s=1;s<arguments.length;s++){var n=null!=arguments[s]?arguments[s]:{};s%2?r(n,!0).forEach((function(r){t(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const n=e=>(t,r)=>{let s=r.parseWithExpression(t,e);return null!==s&&t.exhausted()?s:null},a=e=>e;class i{constructor(e,t,r=a){this.name=e,this.expression=t,this.matchProcessor=r}accept(e,t){let{expression:r,name:s}=this;return t.trackExpression(e,r,s,()=>{let s=t.parseWithExpression(e,r);return null!==s?this.matchProcessor(s):null})}}class o extends i{constructor(e,t,r){super(e,t,r||(e=>(...t)=>"function"==typeof e?e.apply(null,t):e))}}class l{constructor(e,t,...r){this.name=e,this.rules=[].concat(t,r)}accept(e,t){return this.startingRule.accept(e,t)}findRuleByName(e){let t=this.rules.find(t=>t.name===e);if(!t)throw new Error(`Failed to find a rule named "${e}" in the grammar`);return t}get startingRule(){return this.rules[0]}}const c=e=>(t,r)=>t.markAndClearOrReset(()=>{let s=r.parseWithExpression(t,e);return null!==s?s:""}),u=(...e)=>(t,r)=>t.markAndClearOrReset(()=>{for(let s of e){let e=t.markAndClearOrReset(()=>r.parseWithExpression(t,s));if(null!==e)return e}return null}),p=(...e)=>(t,r)=>t.markAndClearOrReset(()=>{let s=[];for(let n of e){let e=t.markAndClearOrReset(()=>r.parseWithExpression(t,n));if(null===e)return null;s.push(e)}return s}),m=e=>(t,r)=>t.markAndClearOrReset(()=>{let s=[];for(;;){let n=t.markAndClearOrReset(()=>r.parseWithExpression(t,e));if(!n)break;s.push(n)}return s});class f{constructor(e){t(this,"position",0),t(this,"positionStack",[]),this.input=e}clear(){if(void 0===this.positionStack.pop())throw new Error("Called clear() but no matching mark()")}exhausted(){return this.position===this.input.length}mark(){this.positionStack.push(this.position)}markAndClearOrReset(e){this.mark();let t=e();return null!==t?(this.clear(),t):(this.reset(),null)}read(e){let t=this.input.substring(this.position),r=t.match(/^\s+/);r&&(r=r[0],t=t.substring(r.length));let s=new RegExp(e.source).exec(t);if(s){let[e]=s;if(t.startsWith(e))return this.position+=e.length+(r?r.length:0),s}return null}reset(){let e=this.positionStack.pop();if(void 0===e)throw new Error("Called reset() but no matching mark()");this.position=e}}function h(e){return e.reduce((e,t)=>e.concat(Array.isArray(t)?h(t):t),[])}function d(e,t){return e.find((r,s)=>{if(t(r))return e.splice(s,1),r})}var w=new l("Thymeleaf Expression Language",new o("ThymeleafExpression",u(n("VariableExpression"),n("MessageExpression"),n("LinkExpression"),n("FragmentExpression"),n("Iteration"),n("StringConcatenation"),n("ScopedVariables"),n("Literal"),n("LogicalExpression"),n("IfThenCondition"),n("IfThenElseCondition"),n("TokenLiteral"),n("Nothing"))),new o("VariableExpression",p(/\${/,"Chain",/\}/),([,e])=>t=>{let r=e(t);return null!=r?r:""}),new o("Chain",p(c("Negation"),"ChainLink",m(p(/\./,"ChainLink"))),([e,...t])=>r=>{let s=h(t).filter(e=>"."!==e).reduce((e,t)=>null==e?e:t(e,r),r);return"function"==typeof e?!s:s}),new o("ChainLink",u("MethodCall","PropertyName","Literal")),new o("Negation",/!/),new o("MessageExpression",p(/#{/,"MessageKey",c(p(/\(/,p("Expression",m(p(/,/,"Expression"))),/\)/)),/}/),([,e,[,t]])=>r=>({type:"message",key:e(r),parameters:t?h(t).filter(e=>"function"==typeof e).map(e=>e(r)):null})),new o("MessageKey",/[\w.-]+/),new o("LinkExpression",((e,t)=>(r,s)=>r.markAndClearOrReset(()=>{let n=r.read(e);if(n){let e=[n[0]];for(let r=1;r<n.length;r++){let a=n[r];if(void 0!==a){let n=s.parseWithExpression(new f(a),t[r-1]);if(null===n)return null;e.push(n)}}return e}return null}))(/^@\{(.+?)(\(.+\))?\}$/,["Url","UrlParameters"]),([,e,t])=>r=>{let s=e(r);if(t){let e=new E,n=t(r).slice(1,-1).split(",").map(t=>{let[s,n]=t.split("=");return[s,e.process(n,r)]});for(;;){let e=/(.*?)\{(.+?)\}(.*)/.exec(s);if(!e)break;{let[,t,r,a]=e,i=d(n,([e])=>e===r);i&&(s=`${t}${i[1]}${a}`)}}n.length&&(s+=`?${n.map(([e,t])=>`${e}=${t}`).join("&")}`)}return s}),new o("Url",/.+/),new o("UrlParameters",/\((.+)\)/),new o("FragmentExpression",p(/~{/,"TemplateName",/::/,"FragmentName",c("FragmentParametersSection"),/}/),([,e,,t,r])=>s=>({type:"fragment",templateName:e(s),fragmentName:t(s),parameters:r?r(s):null})),new o("TemplateName",u(/[\w-._/]+/,"VariableExpression")),new o("FragmentName",/[\w-._]+/),new o("FragmentParametersSection",p(/\(/,c("FragmentParameters"),/\)/),([,e])=>t=>e(t)),new o("FragmentParameters",p("Expression",m(p(/,/,"Expression"))),e=>t=>e?h(e).filter(e=>","!==e).map(e=>e(t)):[]),new o("Iteration",p("Identifier",c(p(/,/,"Identifier")),/:/,"VariableExpression"),([e,[,t],,r])=>s=>({type:"iteration",localValueName:e(s),iterable:r(s),iterationStatusVariable:t?t(s):null})),new o("StringConcatenation",p("Concatenatable",(e=>(t,r)=>t.markAndClearOrReset(()=>{let s=[];for(;;){let n=t.markAndClearOrReset(()=>r.parseWithExpression(t,e));if(!n)break;s.push(n)}return s.length>0?s:null}))(p(/\+/,"Concatenatable"))),e=>t=>h(e).filter(e=>"+"!==e).reduce((e,r)=>e+("function"==typeof r?r(t):r),"")),new o("Concatenatable",u("StringLiteral","VariableExpression")),new o("ScopedVariables",p("ScopedVariable",m(p(/,/,"ScopedVariable"))),e=>t=>h(e).map(e=>e(t))),new o("ScopedVariable",p("Identifier",/=/,"Expression"),([e,,t])=>r=>({name:e(r),value:t(r)})),new o("Literal",u("StringLiteral","NumberLiteral","BooleanLiteral","NullLiteral")),new o("StringLiteral",/'.*?(?!\\').'/,e=>()=>e.slice(1,-1).replace(/\\/g,"")),new o("NumberLiteral",/\d+(\.\d+)?/,e=>()=>parseFloat(e)),new o("BooleanLiteral",/(true|false)/,e=>()=>"true"===e),new o("NullLiteral",/null/,()=>()=>null),new o("TokenLiteral",/[^: ${}]+/,e=>()=>e),new o("LogicalExpression",p("Expression","Comparator","Expression"),([e,t,r])=>s=>{let n=e(s),a=r(s);switch(t(s)){case"==":return n==a;case"===":return n===a;case"!=":return n!=a;case"!==":return n!==a}return!1}),new o("Comparator",u(/[=!]==?/)),new o("IfThenCondition",p("Condition",/\?/,"Expression"),([e,,t])=>r=>e(r)?t(r):void 0),new o("IfThenElseCondition",p("Condition",/\?/,"Expression",/:/,"Expression"),([e,,t,,r])=>s=>e(s)?t(s):r(s)),new o("Condition",u("LogicalExpression","Expression")),new o("Nothing",/^$/),new o("Identifier",/[#a-zA-Z_][\w]*/),new o("PropertyName","Identifier",e=>t=>{let r=e(t);return t.hasOwnProperty(r)?t[r]:""}),new o("MethodCall",p("MethodName",/\(/,c("MethodParameters"),/\)/),([e,,t])=>(r,s)=>{let n=e(r),a=r[n];return a?a.apply(r,t(s||r)):(console.warn(`No method '${n}' present on the current context.  Expression: ${r.expression}`),"")}),new o("MethodName","Identifier"),new o("MethodParameters",p("Chain",m(p(/,/,"Chain"))),e=>t=>e?h(e).filter(e=>","!==e).map(e=>e(t)):[]),new o("Expression",u("VariableExpression","StringConcatenation","Literal")));class g{constructor(e){t(this,"expressionStack",[]),this.grammar=e}parse(e){let t=new f(e),r=this.grammar.accept(t,this);if(null===r||!t.exhausted()){let t=`Failed to parse "${e}"`;if("production"===process.env.NODE_ENV)return console.error(t),null;throw new Error(t)}return r}parseWithExpression(e,t){if("string"==typeof t){let r=this.grammar.findRuleByName(t);return r?r.accept(e,this):null}if(t instanceof RegExp){let r=e.read(t);if(r)return r[0]}else if("function"==typeof t)return t(e,this);return null}trackExpression(e,t,r,s){let n=this.expressionStack.push({name:r,expression:"function"!=typeof t?t.toString():null,input:e.input.substring(e.position)}),a=s();return null!==a?a:(this.expressionStack.splice(n-1),null)}}class E{constructor(e=w){this.grammar=e}process(e,t={}){let r=new g(this.grammar).parse(e);return r?r(s({},t,{expression:e})):null}}class x{constructor(e,t){this.prefix=e,this.name=t}}class b extends x{constructor(e){super(e,b.NAME)}process(e,t,r,s){/(.+=.+,)*.+=.+/.test(r)?r.split(",").forEach(t=>{let r=t.split("=");e.setAttribute(r[0],function(e){return"string"!=typeof e?e:e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}((new E).process(r[1],s)))}):"test"!==process.env.NODE_ENV&&console.warn(`Value to ${t}, ${r}, doesn't seem to contain an attribute assignment expression.  Ignoring.`),e.removeAttribute(t)}}t(b,"NAME","attr");class A{constructor(e,t){this.prefix=e,this.name=t}}class N extends A{constructor(e){super(e,N.NAME)}process(e,t){let r=e.parentElement;for(;e.firstChild;){let t=e.firstChild;r.insertBefore(t,e),t instanceof Element&&e.__thymeleafLocalVariables&&(t.__thymeleafLocalVariables=s({},t.__thymeleafLocalVariables||{},{},e.__thymeleafLocalVariables))}return r.removeChild(e),!0}}t(N,"NAME","block");class y extends x{constructor(e){super(e,y.NAME)}process(e,t,r,s){(new E).process(r,s)?e.setAttribute("checked",""):e.removeAttribute("checked"),e.removeAttribute(t)}}t(y,"NAME","checked");class v extends x{constructor(e){super(e,v.NAME)}process(e,t,r,s){let n=(new E).process(r,s);n&&(e.className+=` ${n}`),e.removeAttribute(t)}}t(v,"NAME","classappend");class C extends x{constructor(e){super(e,C.NAME)}process(e,t,r,s){e.removeAttribute(t);let n=(new E).process(r,s);if(n){let{localValueName:t,iterable:r}=n,s=e.cloneNode(!0);for(let n of r){let r=s.cloneNode(!0);r.__thymeleafLocalVariables={[t]:n},e.parentElement.appendChild(r)}}return e.parentElement.removeChild(e),!0}}t(C,"NAME","each");class M extends x{constructor(e,t){super(e,t)}process(e,t,r,s){let n=(new E).process(r,s);e.setAttribute(this.name,n?n.toString():""),e.removeAttribute(t)}}const k=["datetime","href","src","style","value"];class $ extends x{constructor(e){super(e,$.NAME)}process(e,t,r,s){e.removeAttribute(t)}}function L(e){for(;e.firstChild;)e.removeChild(e.firstChild)}t($,"NAME","fragment");class O extends x{constructor(e){super(e,O.NAME)}process(e,t,r,s){if(!(new E).process(r,s))return L(e),e.parentNode.removeChild(e),!0;e.removeAttribute(t)}}t(O,"NAME","if");var S=new l("Thymeleaf fragment signature",new o("ThymeleafFragmentSignatureRule",n("FragmentSignature")),new o("FragmentSignature",p("FragmentName",c("FragmentParameters")),([e,t])=>r=>({fragmentName:e(r),parameterNames:t?t(r):null})),new o("FragmentName",/[\w-._]+/),new o("FragmentParameters",p(/\(/,m("FragmentParameterNames"),/\)/),([,[e]])=>t=>e(t)),new o("FragmentParameterNames",p("Identifier",m(p(/,/,"Identifier"))),e=>t=>e?h(e).filter(e=>","!==e).map(e=>e(t)):[]),new o("Identifier",/[#a-zA-Z_][\w]*/));function R(e,t,r){return e.getAttribute(`${t}:${r}`)||e.getAttribute(`data-${t}-${r}`)}function P(e){return require("@ultraq/dom-utils").deserialize(e)}var F="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var _=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){!function(t,r){if(e.exports)e.exports=r();else{var s=r();Object.keys(s).forEach((function(e){t[e]=s[e]}))}}(F,(function(){return{$:function(e,t){return(t||document).querySelector(e)},$$:function(e,t){return Array.prototype.slice.call((t||document).querySelectorAll(e))}}}))})),V=_.$;_.$$;async function T(e,t){let{templateResolver:r}=t;if(r){let{templateName:s,fragmentName:n}=e,a=P(await r(s)),i=t.dialects.find(e=>e.name===Z.NAME).prefix,o=$.NAME;return V(`[${i}\\:${o}^="${n}"]`,a)||V(`[data-${i}-${o}^="${n}"]`,a)}return console.log("No template resolver configured"),null}class I extends x{constructor(e){super(e,I.NAME)}async process(e,t,r,s){e.removeAttribute(t),L(e);let n=(new E).process(r,s);if(n){let t=await T(n,s);if(t){let r=R(t,s.dialects.find(e=>e.name===Z.NAME).prefix,$.NAME),{parameterNames:a}=new E(S).process(r,s);if(a){let{parameters:e}=n,r={};a.forEach((t,s)=>{r[t]=e[t]||e[s]||null}),t.__thymeleafLocalVariables=r}return e.appendChild(t),!0}}return!1}}t(I,"NAME","insert");class j extends x{constructor(e,t){super(e,t)}process(e,t,r,s){let n=(new E).process(r,s);n?e.setAttribute(this.name,n.toString()):e.removeAttribute(this.name),e.removeAttribute(t)}}const D=["alt","class"];class W extends x{constructor(e){super(e,W.NAME)}process(e,t,r,s){switch(e.removeAttribute(t),r){case"all":return e.parentElement.removeChild(e),!0;case"all-but-first":for(;e.lastElementChild!==e.firstElementChild;)e.removeChild(e.lastElementChild);return!1}}}t(W,"NAME","remove");class U extends x{constructor(e){super(e,U.NAME)}async process(e,t,r,s){e.removeAttribute(t),L(e);let n=(new E).process(r,s);if(n){let t=await T(n,s);if(t){let r=R(t,s.dialects.find(e=>e.name===Z.NAME).prefix,$.NAME),{parameterNames:a}=new E(S).process(r,s);if(a){let{parameters:e}=n,r={};a.forEach((t,s)=>{r[t]=e[t]||e[s]||null}),t.__thymeleafLocalVariables=r}return e.parentElement.insertBefore(t,e),e.remove(),!0}}return e.remove(),!1}}t(U,"NAME","replace");class q extends x{constructor(e){super(e,q.NAME)}async process(e,t,r,s){let n=(new E).process(r,s);e.textContent="object"==typeof n?await async function(e,t){let{messageResolver:r}=t;if(r){let{key:t,parameters:s}=e;return await r(t,s)||""}return console.log("No message resolver configured"),null}(n,s):n,e.removeAttribute(t)}}t(q,"NAME","text");class B extends x{constructor(e){super(e,B.NAME)}process(e,t,r,s){(new E).process(r,s)&&(L(e),e.parentNode.removeChild(e)),e.removeAttribute(t)}}t(B,"NAME","unless");class z extends x{constructor(e){super(e,z.NAME)}process(e,t,r,s){e.innerHTML=(new E).process(r,s),e.removeAttribute(t)}}t(z,"NAME","utext");class X extends x{constructor(e){super(e,X.NAME)}process(e,t,r,s){e.removeAttribute(t);let n={};return(new E).process(r,s).forEach(({name:e,value:t})=>{n[e]=t}),e.__thymeleafLocalVariables=n,!0}}t(X,"NAME","with");class K{constructor(e,t){this.name=e,this.prefix=t}get expressionObjects(){return null}get processors(){return null}}class Z extends K{constructor(e=Z.DEFAULT_PREFIX){super(Z.NAME,e)}get processors(){let{prefix:e}=this;return[new I(e),new U(e),new C(e),new O(e),new B(e),new X(e),new b(e),new v(e),...k.map(t=>new M(e,t)),...D.map(t=>new j(e,t)),new y(e),new q(e),new z(e),new $(e),new W(e),new N(e)]}}t(Z,"NAME","Standard"),t(Z,"DEFAULT_PREFIX","thjs");const G={dialects:[new Z]},H=s({},G,{dialects:[new Z("th")],isomorphic:{prefix:"thjs"}});class J{constructor(e,t){this.context=e,this.isomorphic=t}matches(e,t){let{name:r}=t;if(t instanceof x){let s=[].concat(this.isomorphic?this.isomorphic.prefix:[],t.prefix);for(let t of s){let s;if(s=`${t}:${r}`,e.hasAttribute(s))return s;if(s=`data-${t}-${r}`,e.hasAttribute(s))return s}}else if(t instanceof A){let s=`${t.prefix}:${r}`;if(e.tagName===s.toUpperCase())return s}return null}}const Q=`xmlns:${Z.DEFAULT_PREFIX}`;return e.AttributeProcessor=x,e.Dialect=K,e.ExpressionProcessor=E,e.STANDARD_CONFIGURATION=H,e.StandardDialect=Z,e.TemplateEngine=class{constructor({dialects:e,isomorphic:t,messageResolver:r,templateResolver:n}=G){this.dialects=e,this.isomorphic=t,this.messageResolver=r,this.templateResolver=n,this.processors=e.reduce((e,{processors:t})=>t?[...e,...t]:e,[]),this.expressionObjects=e.reduce((e,{expressionObjects:t})=>t?s({},e,{},t):e,{})}process(e,t={}){let r=P(e),n=r.firstElementChild;return this.processNode(n,s({},t,{},this.expressionObjects,{dialects:this.dialects,messageResolver:this.messageResolver,templateResolver:this.templateResolver})).then(()=>(n.hasAttribute(Q)&&n.removeAttribute(Q),function(e){return require("@ultraq/dom-utils").serialize(e)}(r)))}processFile(e,t={}){return Promise.reject(new Error("Cannot use fs.readFile inside a browser"))}async processNode(e,t={}){let r=s({},t,{},e.__thymeleafLocalVariables||{}),n=new J(r,this.isomorphic);for(let t=0;t<this.processors.length;t++){let s=this.processors[t],a=!1,i=n.matches(e,s);if(i&&(s instanceof x?a=await s.process(e,i,e.getAttribute(i),r):s instanceof A&&(a=await s.process(e,r))),a)return!0}for(let t=0;t<e.children.length;){let s=e.children[t];await this.processNode(s,r)||t++}}},e}({});
//# sourceMappingURL=thymeleaf.min.js.map
